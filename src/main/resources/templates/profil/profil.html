<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Profil Client</title>
    <link rel="stylesheet" th:href="@{/css/profil.css}">
    <link rel="stylesheet" href="/css/header.css">
</head>
<body>
<!-- Header -->
<div th:insert="~{_parts/_header :: header}"></div>

<!-- Profil Container -->
<div class="profil-container">
    <!-- Sidebar -->
    <aside class="profil-sidebar">
        <h2 th:text="${client.prenom}">Prénom</h2>
        <nav>
            <ul>
                <li><a href="#" class="active" data-section="infos">Mon compte</a></li>
                <li><a href="#" data-section="produits">Les produits</a></li>
                <li><a href="#" data-section="concours">Les concours</a></li>
                <li><a href="#" data-section="permis">Permis de pêche</a></li>
            </ul>
        </nav>
        <form th:action="@{/logout}" method="post">
            <button type="submit" class="logout-button">Déconnexion</button>
        </form>
    </aside>

    <!-- Profil Content -->
    <main class="profil-content">
        <!-- Infos Section -->
        <section id="infos" class="content-section">
            <h2>Mes infos</h2>
            <div class="info-grid">
                <div class="info-card"><h3>Prénom</h3><p th:text="${client.prenom}">John</p></div>
                <div class="info-card"><h3>Nom</h3><p th:text="${client.nom}">Doe</p></div>
                <div class="info-card"><h3>Téléphone</h3><p th:text="${client.telephone}">1234567890</p></div>
                <div class="info-card"><h3>Email</h3><p th:text="${client.email}">john@example.com</p></div>
                <div class="info-card"><h3>Adresse</h3><p th:text="${client.adresse}">123 Rue XYZ</p></div>
                <div class="info-card" th:if="${client.role == T(com.magasinpeche.model.Role).ADMIN}">
                    <h3>Permissions</h3><p>Vous avez <strong>SUPER </strong> Permission Set.</p><p>Can read, use, update, and delete all data</p>
                </div>
            </div>
        </section>

        <!-- Other Sections (Produits, Concours, Permis, Administration) -->
        <section id="produits" class="content-section" style="display: none;">
            <h2>Mes produits</h2>
            <p>Vos produits favoris et ceux que vous avez achetés sont affichés ici...</p>
        </section>

        <section id="concours" class="content-section" style="display: none;">
            <h2>Mes concours</h2>
            <p th:if="${#lists.isEmpty(concours)}">Vous ne participez à aucun concours actuellement.</p>
            <div th:unless="${#lists.isEmpty(concours)}">
                <div class="concours-container">
                    <div class="concours-header">
                        <div>Nom</div><div>Date</div><div>Lieu</div><div>Description</div><div>Action</div>
                    </div>
                    <div th:each="concours : ${concours}" class="concours-row">
                        <div th:text="${concours.nom}"></div>
                        <div th:text="${concours.date}"></div>
                        <div th:text="${concours.lieu}"></div>
                        <div th:text="${concours.description}"></div>
                        <div>
                            <form th:action="@{/concours/desinscrire/{id}(id=${concours.id})}" method="get"
                                  onsubmit="return confirm('Voulez-vous vraiment vous désinscrire de ce concours ?');">
                                <button type="submit" class="edit-button">Se désinscrire</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="permis" class="content-section" style="display: none;">
            <h2>Permis de pêche</h2>
            <p th:if="${permis == null}">Vous n'avez pas encore de permis en cours de validité. <a href="/permis/demande">Déposer une demande</a></p>
            <div th:if="${permis != null}">
                <h3>Statut de votre demande : <span th:text="${permis.statut}"></span></h3>
                <h3>Date de dépôt de votre demande : <span th:text="${#dates.format(permis.dateDemande, 'dd-MM-yyyy')}"></span></h3>
            </div>
        </section>


    </main>
</div>

<script src="/js/profil.js"></script>
</body>
</html>
